<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetMarket OS - TITAN Ultimate</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- 1. CORE VARIABLES & THEME --- */
        :root {
            --primary: #d4af37; /* Gold Premium */
            --primary-glow: rgba(212, 175, 55, 0.4);
            --bg-deep: #0b0c10;
            --bg-sidebar: #111418;
            --bg-panel: #1a1d21;
            --bg-card: #212529;
            --border: #2d3238;
            --text-main: #e0e6ed;
            --text-muted: #949ba3;
            --accent-blue: #4dabf7;
            --accent-green: #51cf66;
            --accent-red: #ff6b6b;
            --font-ui: 'Inter', sans-serif;
            --font-head: 'Playfair Display', serif;
            --font-code: 'JetBrains Mono', monospace;
            --radius: 8px;
            --sidebar-w: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; scrollbar-width: thin; scrollbar-color: var(--border) var(--bg-deep); }
        body { background: var(--bg-deep); color: var(--text-main); font-family: var(--font-ui); height: 100vh; display: flex; overflow: hidden; }

        /* --- 2. LAYOUT --- */
        .sidebar { width: var(--sidebar-w); background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 10; }
        .main-wrapper { flex: 1; display: flex; flex-direction: column; position: relative; overflow: hidden; }
        .top-bar { height: 60px; border-bottom: 1px solid var(--border); background: var(--bg-sidebar); display: flex; align-items: center; justify-content: space-between; padding: 0 25px; }
        .content-area { flex: 1; overflow-y: auto; padding: 30px; position: relative; }

        /* --- 3. COMPONENTS --- */
        /* Brand */
        .brand { padding: 25px; font-family: var(--font-head); font-size: 1.4rem; color: #fff; letter-spacing: 0.5px; display: flex; align-items: center; gap: 10px; }
        .brand i { color: var(--primary); filter: drop-shadow(0 0 5px var(--primary-glow)); }

        /* Nav */
        .nav-section { padding: 0 15px; margin-bottom: 20px; }
        .nav-label { font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); font-weight: 700; margin-bottom: 8px; padding-left: 10px; }
        .nav-item { padding: 10px 15px; border-radius: var(--radius); cursor: pointer; display: flex; align-items: center; gap: 12px; font-size: 0.9rem; color: var(--text-muted); transition: 0.2s; margin-bottom: 2px; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .nav-item.active { background: rgba(212, 175, 55, 0.1); color: var(--primary); border-left: 3px solid var(--primary); }
        .nav-item i { width: 20px; text-align: center; }

        /* Cards */
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; position: relative; overflow: hidden; transition: transform 0.2s; }
        .card:hover { border-color: var(--text-muted); transform: translateY(-2px); }
        .card-head { display: flex; justify-content: space-between; margin-bottom: 15px; align-items: center; }
        .card-title { font-size: 1rem; font-weight: 600; }
        .stat-val { font-size: 2rem; font-weight: 700; color: #fff; font-family: var(--font-code); }
        
        /* Typography Content */
        .doc-section { max-width: 900px; margin: 0 auto; background: var(--bg-panel); padding: 40px; border-radius: var(--radius); border: 1px solid var(--border); box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .doc-title { font-family: var(--font-head); font-size: 2.5rem; margin-bottom: 20px; color: var(--primary); }
        .doc-subtitle { font-size: 1.5rem; margin: 30px 0 15px 0; color: #fff; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .doc-text { font-size: 1rem; line-height: 1.7; color: #ccc; margin-bottom: 15px; text-align: justify; }
        .doc-list { margin-left: 20px; margin-bottom: 15px; color: #ccc; line-height: 1.6; }
        .doc-highlight { background: rgba(212, 175, 55, 0.1); padding: 2px 5px; border-radius: 4px; color: var(--primary); }

        /* Org Chart CSS */
        .tree { display: flex; justify-content: center; margin-top: 30px; }
        .tree ul { padding-top: 20px; position: relative; transition: all 0.5s; display: flex; justify-content: center; }
        .tree li { float: left; text-align: center; list-style-type: none; position: relative; padding: 20px 5px 0 5px; }
        .tree li::before, .tree li::after { content: ''; position: absolute; top: 0; right: 50%; border-top: 1px solid #555; width: 50%; height: 20px; }
        .tree li::after { right: auto; left: 50%; border-left: 1px solid #555; }
        .tree li:only-child::after, .tree li:only-child::before { display: none; }
        .tree li:only-child { padding-top: 0; }
        .tree li:first-child::before, .tree li:last-child::after { border: 0 none; }
        .tree li:last-child::before { border-right: 1px solid #555; border-radius: 0 5px 0 0; }
        .tree li:first-child::after { border-radius: 5px 0 0 0; }
        .tree ul ul::before { content: ''; position: absolute; top: 0; left: 50%; border-left: 1px solid #555; width: 0; height: 20px; }
        
        .member-card { 
            background: var(--bg-card); border: 1px solid var(--border); padding: 15px; border-radius: 8px; 
            display: inline-block; width: 220px; transition: 0.3s; position: relative; z-index: 2;
        }
        .member-card:hover { border-color: var(--primary); transform: scale(1.05); box-shadow: 0 0 15px rgba(212,175,55,0.2); }
        .member-img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--primary); object-fit: cover; margin-bottom: 10px; background: #333; }
        .member-name { font-weight: 700; color: #fff; font-size: 0.95rem; }
        .member-role { font-size: 0.75rem; color: var(--primary); text-transform: uppercase; margin-top: 5px; font-weight: 600; }
        .member-tags { display: flex; justify-content: center; gap: 5px; margin-top: 8px; flex-wrap: wrap; }
        .tag { font-size: 0.65rem; background: #333; padding: 2px 6px; border-radius: 4px; color: #aaa; }

        /* Simulation Modal */
        .sim-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; display: none; flex-direction: column; }
        .sim-overlay.active { display: flex; animation: fadeIn 0.3s; }
        .sim-header { height: 60px; border-bottom: 1px solid #333; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; background: #111; }
        .sim-body { flex: 1; display: flex; overflow: hidden; }
        .sim-view-left { flex: 1; border-right: 1px solid #333; background: #0d0d0d; display: flex; align-items: center; justify-content: center; overflow: auto; padding: 20px; }
        .sim-view-right { width: 450px; background: #080808; display: flex; flex-direction: column; border-left: 1px solid #333; }
        .console-out { flex: 1; padding: 20px; font-family: var(--font-code); font-size: 0.8rem; color: #0f0; overflow-y: auto; }
        .console-line { margin-bottom: 6px; opacity: 0; animation: slideIn 0.2s forwards; border-left: 2px solid transparent; padding-left: 5px; }
        .console-line.highlight { border-left-color: var(--primary); background: rgba(255,255,255,0.05); }

        .workflow-img { max-width: 100%; max-height: 100%; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.5); border: 1px solid #333; transition: 0.3s; }
        
        /* Views visibility */
        .view-section { display: none; animation: fadeIn 0.4s; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateX(10px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Tables */
        .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .data-table th { text-align: left; padding: 12px; border-bottom: 1px solid var(--border); color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; }
        .data-table td { padding: 12px; border-bottom: 1px solid #252a30; color: #ddd; font-size: 0.9rem; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; }
        .bg-green { background: rgba(81, 207, 102, 0.2); color: #51cf66; }
        .bg-orange { background: rgba(255, 159, 67, 0.2); color: #ff9f43; }
        .btn-action { background: var(--primary); border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: 600; color: #000; display: inline-flex; align-items: center; gap: 8px; }
        .btn-action:hover { background: #fff; }

    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="brand"><i class="fas fa-layer-group"></i> NetMarket <span style="font-size:0.6rem; border:1px solid var(--primary); padding:2px 4px; border-radius:4px; margin-left:5px;">TITAN v7</span></div>
        
        <div class="nav-section">
            <div class="nav-label">Entreprise</div>
            <div class="nav-item active" onclick="nav('dashboard', this)"><i class="fas fa-chart-pie"></i> Dashboard</div>
            <div class="nav-item" onclick="nav('corporate', this)"><i class="fas fa-building"></i> Contexte & Histoire</div>
            <div class="nav-item" onclick="nav('team', this)"><i class="fas fa-users"></i> Équipe Projet</div>
        </div>

        <div class="nav-section">
            <div class="nav-label">Solutions Métiers</div>
            <div class="nav-item" onclick="nav('design', this)"><i class="fas fa-pencil-ruler"></i> NetDesignX</div>
            <div class="nav-item" onclick="nav('cat', this)"><i class="fas fa-tags"></i> NetCatX</div>
            <div class="nav-item" onclick="nav('promo', this)"><i class="fas fa-bullhorn"></i> NetMarkX</div>
            <div class="nav-item" onclick="nav('care', this)"><i class="fas fa-headset"></i> NetCareX</div>
        </div>

        <div style="margin-top:auto; padding:20px; font-size:0.8rem; color:#666; border-top:1px solid var(--border);">
            <div><i class="fas fa-server"></i> System: Stable</div>
            <div><i class="fas fa-clock"></i> <span id="clock">12:00</span></div>
        </div>
    </aside>

    <div class="main-wrapper">
        <div class="top-bar">
            <div style="font-size:0.9rem; color:var(--text-muted);" id="breadcrumbs">NetMarket / Dashboard</div>
            <div style="display:flex; gap:15px; align-items:center;">
                <div style="font-size:0.8rem;"><span style="color:var(--accent-green)">●</span> API Connectée</div>
                <div style="width:35px; height:35px; background:var(--primary); border-radius:50%; display:flex; align-items:center; justify-content:center; color:#000; font-weight:700;">A</div>
            </div>
        </div>

        <div class="content-area">

            <section id="dashboard" class="view-section active">
                <h1 style="font-family:var(--font-head); margin-bottom:20px; color:white;">Vue d'Ensemble Performance</h1>
                
                <div class="grid-3">
                    <div class="card">
                        <div class="card-head"><span class="card-title">Chiffre d'Affaires (2024)</span><i class="fas fa-euro-sign" style="color:var(--primary)"></i></div>
                        <div class="stat-val">11.1 Mds</div>
                        <div style="color:var(--accent-green); font-size:0.9rem; margin-top:5px;"><i class="fas fa-arrow-up"></i> +7% vs 2023</div>
                    </div>
                    <div class="card">
                        <div class="card-head"><span class="card-title">Clients Actifs</span><i class="fas fa-user-friends" style="color:var(--accent-blue)"></i></div>
                        <div class="stat-val">50 M</div>
                        <div style="color:var(--text-muted); font-size:0.9rem; margin-top:5px;">Europe</div>
                    </div>
                    <div class="card">
                        <div class="card-head"><span class="card-title">Collaborateurs</span><i class="fas fa-id-badge" style="color:var(--accent-red)"></i></div>
                        <div class="stat-val">18 000</div>
                        <div style="color:var(--text-muted); font-size:0.9rem; margin-top:5px;">Répartis sur 4 pays</div>
                    </div>
                </div>

                <div class="card" style="margin-bottom:20px;">
                    <div class="card-head"><span class="card-title">Statut des Workflows n8n (Live)</span></div>
                    <table class="data-table">
                        <thead><tr><th>Département</th><th>Outil</th><th>Dernier Trigger</th><th>Statut</th><th>Action</th></tr></thead>
                        <tbody>
                            <tr><td>Design</td><td>NetDesignX</td><td>Il y a 2 min</td><td><span class="badge bg-green">Actif</span></td><td><button class="btn-action" style="padding:4px 8px; font-size:0.7rem;" onclick="nav('design', null)">Voir</button></td></tr>
                            <tr><td>Catalogue</td><td>NetCatX</td><td>Il y a 5 sec</td><td><span class="badge bg-green">Sync</span></td><td><button class="btn-action" style="padding:4px 8px; font-size:0.7rem;" onclick="nav('cat', null)">Voir</button></td></tr>
                            <tr><td>Marketing</td><td>NetMarkX</td><td>Il y a 10 min</td><td><span class="badge bg-green">Actif</span></td><td><button class="btn-action" style="padding:4px 8px; font-size:0.7rem;" onclick="nav('promo', null)">Voir</button></td></tr>
                            <tr><td>Service Client</td><td>NetCareX</td><td>Temps réel</td><td><span class="badge bg-green">Actif</span></td><td><button class="btn-action" style="padding:4px 8px; font-size:0.7rem;" onclick="nav('care', null)">Voir</button></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="corporate" class="view-section">
                <div class="doc-section">
                    <h1 class="doc-title">Introduction & Contexte</h1>
                    <p class="doc-text">Dans le cadre de notre projet académique, nous avons conçu <strong>NetMarket</strong>, une entreprise inspirée de Zalando. Après des années de croissance, NetMarket (11.1 Mds € de CA) fait face à des limites organisationnelles. Ce diagnostic vise à proposer des solutions digitales (NetDesignX, NetCatX...) pour assurer la pérennité de l'entreprise.</p>
                    
                    <h2 class="doc-subtitle">Présentation de l'Entreprise</h2>
                    <p class="doc-text">Créée en 2008, NetMarket est un leader du e-commerce mode. Siège à Yverdon-les-Bains. <br>
                    <strong>Mission :</strong> Offrir une mode accessible et durable à 50 millions de clients.</p>
                    <ul class="doc-list">
                        <li><span class="doc-highlight">Croissance :</span> +7% par an.</li>
                        <li><span class="doc-highlight">Logistique :</span> Entrepôts automatisés en Allemagne, France, Pologne.</li>
                        <li><span class="doc-highlight">Innovation :</span> Hubs tech à Dublin et Lisbonne.</li>
                    </ul>

                    <h2 class="doc-subtitle">Marché & Enjeux</h2>
                    <p class="doc-text">Le marché e-commerce européen (>150 Mds €) est hyper-concurrentiel (Amazon, ASOS). NetMarket se distingue par un catalogue de 3000 marques et une stratégie RSE forte (Seconde main, neutralité carbone 2030).</p>
                </div>
            </section>

            <section id="team" class="view-section">
                <h1 style="text-align:center; font-family:var(--font-head); margin-bottom:10px;">Structure Organisationnelle</h1>
                <p style="text-align:center; color:var(--text-muted);">Organigramme fonctionnel du projet NetMarket</p>

                <div class="tree">
                    <ul>
                        <li>
                            <div class="member-card">
                                <img src="https://ui-avatars.com/api/?name=Ali+Akbar&background=d4af37&color=000" class="member-img">
                                <div class="member-name">AliAkbar Hosein</div>
                                <div class="member-role">Chef de Projet / Coordination</div>
                                <div class="member-tags">
                                    <span class="tag">Supervision</span>
                                </div>
                            </div>
                            <ul>
                                <li>
                                    <div class="member-card">
                                        <img src="https://ui-avatars.com/api/?name=Sihem+Igoudjil&background=4dabf7&color=fff" class="member-img">
                                        <div class="member-name">Sihem Igoudjil</div>
                                        <div class="member-role">Responsable Fonctionnel</div>
                                        <div class="member-tags">
                                            <span class="tag">Business Analysis</span>
                                            <span class="tag">Spécifications</span>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="member-card">
                                        <img src="https://ui-avatars.com/api/?name=Lihan+Anne&background=ff6b6b&color=fff" class="member-img">
                                        <div class="member-name">Lihan Anne Vanessa</div>
                                        <div class="member-role">Responsable Design & UX</div>
                                        <div class="member-tags">
                                            <span class="tag">UI/UX</span>
                                            <span class="tag">Frontend</span>
                                            <span class="tag">Technique</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </section>

            <section id="design" class="view-section">
                <div class="card-head">
                    <h1 style="font-family:var(--font-head);">NetDesignX</h1>
                    <button class="btn-action" onclick="launchSim('design')"><i class="fas fa-play"></i> Simuler Workflow n8n</button>
                </div>
                <div class="doc-section" style="max-width:100%; margin:0;">
                    <p class="doc-text"><strong>Département Design & Collection :</strong> Responsable de la conception et de la cohérence stylistique. <br>
                    <strong>Problème :</strong> Outils fragmentés (mails, PDF), erreurs de versions.<br>
                    <strong>Solution NetDesignX :</strong> Centralisation via CLO 3D (prototypage), WGSN (tendances) et Monday.com (gestion).</p>
                    <div style="display:flex; gap:10px; margin-top:20px;">
                        <span class="doc-highlight">Stack: CLO 3D</span>
                        <span class="doc-highlight">Stack: WGSN</span>
                        <span class="doc-highlight">Stack: Monday</span>
                    </div>
                </div>
            </section>

            <section id="cat" class="view-section">
                <div class="card-head">
                    <h1 style="font-family:var(--font-head);">NetCatX</h1>
                    <button class="btn-action" onclick="launchSim('cat')"><i class="fas fa-play"></i> Simuler Workflow n8n</button>
                </div>
                <div class="doc-section" style="max-width:100%; margin:0;">
                    <p class="doc-text"><strong>Département Catalogue / E-merchandising :</strong> Lien entre conception et vente. <br>
                    <strong>Objectif :</strong> Garantir la fiabilité des données produits (PIM) et la diffusion multicanale.<br>
                    <strong>Solution NetCatX :</strong> Intégration Akeneo (PIM), Salsify (Diffusion) et Shopify Plus.</p>
                </div>
            </section>

            <section id="promo" class="view-section">
                <div class="card-head">
                    <h1 style="font-family:var(--font-head);">NetMarkX</h1>
                    <button class="btn-action" onclick="launchSim('promo')"><i class="fas fa-play"></i> Simuler Workflow n8n</button>
                </div>
                <div class="doc-section" style="max-width:100%; margin:0;">
                    <p class="doc-text"><strong>Département Marketing :</strong> Acquisition et fidélisation. <br>
                    <strong>Solution NetMarkX :</strong> Automatisation des campagnes via Klaviyo (CRM), Hootsuite (Social) et Google Analytics 4.</p>
                </div>
            </section>

            <section id="care" class="view-section">
                <div class="card-head">
                    <h1 style="font-family:var(--font-head);">NetCareX</h1>
                    <button class="btn-action" onclick="launchSim('care')"><i class="fas fa-play"></i> Simuler Workflow n8n</button>
                </div>
                <div class="doc-section" style="max-width:100%; margin:0;">
                    <p class="doc-text"><strong>Département Service Client :</strong> Gestion post-achat et satisfaction. <br>
                    <strong>Solution NetCareX :</strong> Centralisation Zendesk, Chatbot IA (Tidio) et gestion des retours.</p>
                </div>
            </section>

        </div>
    </div>

    <div id="simModal" class="sim-overlay">
        <div class="sim-header">
            <div style="font-family:var(--font-code); color:var(--primary); font-size:1.2rem;">
                <i class="fas fa-terminal"></i> n8n_EXECUTION_ENGINE: <span id="simTitle">...</span>
            </div>
            <button onclick="closeSim()" style="background:none; border:none; color:#fff; font-size:1.5rem; cursor:pointer;">&times;</button>
        </div>
        <div class="sim-body">
            <div class="sim-view-left">
                <img id="simImage" src="" class="workflow-img" alt="Workflow Diagram">
            </div>
            <div class="sim-view-right">
                <div style="padding:10px; border-bottom:1px solid #333; font-size:0.8rem; color:#666;">EVENT LOGS</div>
                <div id="simConsole" class="console-out">
                    <div>> System Ready. Waiting for trigger...</div>
                </div>
                <div style="padding:20px; border-top:1px solid #333; text-align:center;">
                    <button class="btn-action" id="btnRun" onclick="runScenario()">Lancer Séquence</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. CONFIGURATION DATA ---
        // Mapping between IDs and the Uploaded Image Filenames
        const scenarios = {
            'design': {
                title: 'DESIGN & COLLECTION (NetDesignX)',
                img: 'image_87875e.jpg', // Workflow Design Image
                logs: [
                    "TRIGGER: Webhook 'Collection_Validée' received.",
                    "FETCH: Récupération fichiers 3D (CLO3D) & Tech Packs.",
                    "CONDITION: Vérification complétude dossier (IF).",
                    "ACTION: Normalisation des données (Code Node).",
                    "UPLOAD: Stockage Drive/Sharepoint.",
                    "APPROVAL: Demande validation Chef de Produit.",
                    "DECISION: Validé. Push vers Akeneo PIM.",
                    "SUCCESS: Handoff Catalogue terminé."
                ]
            },
            'cat': {
                title: 'CATALOGUE & E-MERCH (NetCatX)',
                img: 'image_878765.jpg', // Workflow Catalogue Image
                logs: [
                    "TRIGGER: Nouveau fichier CSV Fournisseur détecté.",
                    "PROCESS: Mapping champs -> Modèle NetMarket.",
                    "VALIDATION: Champs obligatoires présents ?",
                    "CODE: Normalisation Tailles (EU/US) & Couleurs.",
                    "CHECK: Détection doublons (IF Exists).",
                    "AKENEO: Création produit / Update attributs.",
                    "SHOPIFY: Publication via API Admin.",
                    "LOG: Mise à jour Google Sheet Reporting."
                ]
            },
            'promo': {
                title: 'MARKETING & COM (NetMarkX)',
                img: 'image_878a0b.jpg', // Workflow Marketing Image
                logs: [
                    "TRIGGER: Webhook 'Nouvelle Collection Publiée'.",
                    "SEGMENT: Filtrage Clients VIP / Nouveaux.",
                    "ENRICH: Récupération données GA4 / CRM.",
                    "KLAVIYO: Déclenchement Flow Emailing personnalisé.",
                    "SOCIAL: Planification posts (Hootsuite API).",
                    "KPI: Tracking Taux d'ouverture & ROI.",
                    "ALERT: Notification équipe si ROI < Seuil."
                ]
            },
            'care': {
                title: 'SERVICE CLIENT (NetCareX)',
                img: 'image_878a26.jpg', // Workflow Care Image
                logs: [
                    "TRIGGER: Webhook Zendesk (Nouveau Ticket).",
                    "CLASSIFY: Analyse IA (Catégorie: Retour/Taille).",
                    "LOOKUP: Récupération commande Shopify.",
                    "RULE: Délai retour < 30j ? (OUI).",
                    "ACTION: Génération étiquette retour.",
                    "UPDATE: Mise à jour ticket & Notification Logistique.",
                    "FEEDBACK: Envoi enquête satisfaction (CSAT)."
                ]
            }
        };

        let currentScenario = null;

        // --- 2. NAVIGATION LOGIC ---
        function nav(id, el) {
            // Hide all sections
            document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
            // Remove active class from navs
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            // Show target
            document.getElementById(id).classList.add('active');
            if(el) el.classList.add('active');
            
            // Breadcrumbs
            document.getElementById('breadcrumbs').innerText = "NetMarket / " + id.charAt(0).toUpperCase() + id.slice(1);
        }

        // --- 3. SIMULATION LOGIC ---
        function launchSim(key) {
            currentScenario = scenarios[key];
            document.getElementById('simTitle').innerText = currentScenario.title;
            
            // Set Image with Fallback
            const imgEl = document.getElementById('simImage');
            imgEl.src = currentScenario.img;
            imgEl.onerror = function() { 
                // Fallback text if image missing locally
                this.style.display='none'; 
                this.parentElement.innerHTML = '<div style="color:white;text-align:center">Image non trouvée.<br>Veuillez placer le fichier <em>'+currentScenario.img+'</em> dans le dossier.</div>'; 
            };
            
            // Reset Console
            document.getElementById('simConsole').innerHTML = '<div>> System Ready. Waiting for trigger...</div>';
            document.getElementById('btnRun').disabled = false;
            document.getElementById('btnRun').innerText = "Lancer Séquence";

            document.getElementById('simModal').classList.add('active');
        }

        function closeSim() {
            document.getElementById('simModal').classList.remove('active');
        }

        function runScenario() {
            const btn = document.getElementById('btnRun');
            btn.disabled = true;
            btn.innerText = "Exécution...";
            const consoleDiv = document.getElementById('simConsole');
            consoleDiv.innerHTML = '';

            let delay = 0;
            currentScenario.logs.forEach((log, index) => {
                delay += 1200; // 1.2s delay
                setTimeout(() => {
                    const line = document.createElement('div');
                    line.className = 'console-line highlight';
                    line.innerText = `> ${log}`;
                    consoleDiv.appendChild(line);
                    consoleDiv.scrollTop = consoleDiv.scrollHeight;

                    if(index === currentScenario.logs.length - 1) {
                        setTimeout(() => {
                            btn.disabled = false;
                            btn.innerText = "Relancer";
                            const finish = document.createElement('div');
                            finish.style.color = 'var(--accent-green)';
                            finish.style.marginTop = '10px';
                            finish.innerText = ">>> WORKFLOW FINISHED SUCCESSFULLY.";
                            consoleDiv.appendChild(finish);
                            consoleDiv.scrollTop = consoleDiv.scrollHeight;
                        }, 500);
                    }
                }, delay);
            });
        }

        // --- 4. CLOCK ---
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('fr-FR', {hour:'2-digit', minute:'2-digit'});
        }, 1000);

    </script>
</body>
</html>
